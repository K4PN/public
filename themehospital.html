<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>Theme Clinic (parodia)</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827;
      --panel-2:#1f2937;
      --accent:#22c55e;
      --accent-2:#eab308;
      --accent-3:#38bdf8;
      --danger:#ef4444;
      --text:#f8fafc;
      --muted:#cbd5e1;
    }
    *{box-sizing:border-box}
    html,body{
      height:100%; margin:0;
      background:linear-gradient(180deg,#0b1022, #0f172a);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell;
      -webkit-tap-highlight-color: transparent;
    }
    .topbar{
      position:fixed; top:0; left:0; right:0; height:56px;
      display:flex; align-items:center; gap:8px;
      padding:8px 12px;
      background:linear-gradient(180deg, rgba(31,41,55,.9), rgba(17,24,39,.9));
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(148,163,184,.2);
      z-index:10;
    }
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:var(--panel-2); border:1px solid rgba(148,163,184,.25); font-weight:600; font-size:14px}
    .badge .dot{width:8px; height:8px; border-radius:50%; background:var(--accent)}
    .spacer{flex:1}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:10px 12px; border-radius:12px; border:1px solid rgba(148,163,184,.25);
      background:var(--panel); color:var(--text);
      font-weight:700; letter-spacing:.2px; min-width:44px; min-height:44px;
      box-shadow:0 6px 12px rgba(0,0,0,.25);
      user-select:none;
      touch-action: manipulation;
    }
    .btn:active{ transform:scale(.98) }
    .btn.primary{ background:linear-gradient(180deg, #22c55e, #16a34a); border-color:#16a34a; color:#062813 }
    .btn.ghost{ background:var(--panel-2) }
    .toolbar{
      position:fixed; left:0; right:0; bottom:0;
      display:grid; grid-template-columns: repeat(5, 1fr);
      gap:8px; padding:10px;
      background:linear-gradient(0deg, rgba(17,24,39,.95), rgba(31,41,55,.9));
      border-top:1px solid rgba(148,163,184,.2);
      z-index:10;
    }
    .drawer{
      position:fixed; right:8px; bottom:78px; width:290px; max-width:calc(100% - 16px);
      background:var(--panel); border:1px solid rgba(148,163,184,.25);
      border-radius:16px; overflow:hidden; z-index:12;
      box-shadow:0 18px 40px rgba(0,0,0,.4);
    }
    .drawer-header{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:var(--panel-2);}
    .drawer-content{ max-height:46vh; overflow:auto; }
    .tileOpt{display:flex; align-items:center; gap:10px; padding:10px 12px; border-bottom:1px dashed rgba(148,163,184,.2); background:transparent; color:inherit; width:100%;}
    .tileIcon{ width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; border-radius:8px; background:#0b2a1a }
    .price{ margin-left:auto; font-weight:800; color:var(--accent-2) }
    #gameWrap{ position:fixed; inset:56px 0 64px 0; }
    #game{ width:100%; height:100%; display:block; background:#081022; touch-action:none; }
    .infopanel{ position:fixed; left:8px; bottom:78px; width:260px; background:var(--panel); border:1px solid rgba(148,163,184,.25); border-radius:16px; overflow:hidden; box-shadow:0 18px 40px rgba(0,0,0,.35); z-index:9; }
    .infopanel h3{ margin:0; font-size:16px; padding:10px 12px; background:var(--panel-2);}
    .infopanel .content{ padding:10px 12px; display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
    .pill{ background:#0c1428; border:1px solid rgba(148,163,184,.25); padding:8px; border-radius:12px; font-size:12px; text-align:center; }
    .log{ grid-column:1/-1; background:#0c1428; border:1px solid rgba(148,163,184,.25); padding:8px; border-radius:12px; font-size:12px; max-height:120px; overflow:auto}
    .toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:150px; background:rgba(17,24,39,.95); color:var(--text); border:1px solid rgba(148,163,184,.25); border-radius:999px; padding:10px 16px; font-weight:700; box-shadow:0 12px 28px rgba(0,0,0,.35); z-index:20; display:none; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="badge"><span class="dot"></span> Theme Clinic (parodia)</div>
    <div class="spacer"></div>
    <div id="money" class="btn ghost">üí∞ 20.000</div>
    <div id="rep" class="btn ghost">ü§ù 0</div>
    <button id="speedBtn" class="btn primary">‚è© x1</button>
  </div>

  <div id="gameWrap"><canvas id="game" width="800" height="600"></canvas></div>

  <div class="toolbar">
    <button class="btn primary" data-tool="pan">üñêÔ∏è Mover</button>
    <button class="btn" data-tool="build">üèóÔ∏è Construir</button>
    <button class="btn" data-tool="erase">üßπ Vender</button>
    <button class="btn" data-tool="hire">üßë‚Äç‚öïÔ∏è Contratar</button>
    <button class="btn" data-tool="info">‚ÑπÔ∏è Info</button>
  </div>

  <div class="drawer" id="drawer" hidden>
    <div class="drawer-header">
      <strong id="drawerTitle">Construir</strong>
      <button class="btn" id="closeDrawer">‚úñ</button>
    </div>
    <div class="drawer-content" id="drawerContent"></div>
  </div>

  <div class="infopanel">
    <h3>Estado del Hospital</h3>
    <div class="content">
      <div class="pill">Pacientes: <span id="patientsCount">0</span></div>
      <div class="pill">Personal: <span id="staffCount">0</span></div>
      <div class="pill">Reputaci√≥n: <span id="rep2">0</span></div>
      <div class="pill">D√≠a: <span id="day">1</span></div>
      <div class="log" id="log"></div>
    </div>
  </div>

  <div class="toast" id="toast">Guardado</div>

<script>
/* Juego Theme Clinic (parodia) simplificado y t√°ctil */
(function(){
  const $ = s=>document.querySelector(s);
  const moneyEl=$("#money"),repEl=$("#rep"),rep2El=$("#rep2"),
        patientsCountEl=$("#patientsCount"),staffCountEl=$("#staffCount"),
        logEl=$("#log"),speedBtn=$("#speedBtn"),
        canvas=$("#game"),ctx=canvas.getContext("2d");

  const GRID=32,WORLD_W=40,WORLD_H=30;
  const CAMERA={x:0,y:0,zoom:1};
  const state={money:20000,rep:0,patients:[],staff:[],rooms:[],tiles:[],doors:new Set(),nextId:1};

  for(let y=0;y<WORLD_H;y++){state.tiles[y]=[];for(let x=0;x<WORLD_W;x++){const isWall=(x==0||y==0||x==WORLD_W-1||y==WORLD_H-1);state.tiles[y][x]={x,y,wall:isWall,roomId:null};}}

  function fmt(n){return n.toLocaleString("es-ES");}
  function log(m){const t=document.createElement("div");t.textContent=m;logEl.prepend(t);}
  function updateHUD(){moneyEl.textContent="üí∞ "+fmt(state.money);repEl.textContent="ü§ù "+state.rep;rep2El.textContent=state.rep;}

  // Herramientas
  document.querySelectorAll(".toolbar .btn").forEach(b=>{
    b.addEventListener("click",()=>{
      document.querySelectorAll(".toolbar .btn").forEach(o=>o.classList.remove("primary"));
      b.classList.add("primary");
      if(b.dataset.tool==="info"){toast("Construye una recepci√≥n primero.");}
      if(b.dataset.tool==="build"){openDrawer("Construir",["Recepci√≥n","Consulta","Farmacia"]);} 
      if(b.dataset.tool==="hire"){openDrawer("Contratar",["Doctor","Enfermera"]);} 
    });
  });

  const drawer=$("#drawer"),drawerTitle=$("#drawerTitle"),drawerContent=$("#drawerContent");
  $("#closeDrawer").onclick=()=>drawer.hidden=true;
  function openDrawer(title,opts){drawerTitle.textContent=title;drawerContent.innerHTML="";opts.forEach(o=>{let btn=document.createElement("button");btn.className="tileOpt";btn.textContent=o;drawerContent.appendChild(btn);});drawer.hidden=false;}

  function toast(msg){const t=$("#toast");t.textContent=msg;t.style.display="block";setTimeout(()=>t.style.display="none",1500);}

  // Render simple
  function resize(){canvas.width=canvas.clientWidth*devicePixelRatio;canvas.height=canvas.clientHeight*devicePixelRatio;ctx.setTransform(1,0,0,1,0,0);ctx.scale(devicePixelRatio,devicePixelRatio);}
  window.onresize=resize;resize();
  function draw(){ctx.fillStyle="#0b122a";ctx.fillRect(0,0,canvas.width,canvas.height);for(let y=0;y<WORLD_H;y++){for(let x=0;x<WORLD_W;x++){ctx.fillStyle=(x+y)%2?"#0a1730":"#0b1b38";ctx.fillRect(x*GRID,y*GRID,GRID,GRID);}}requestAnimationFrame(draw);}
  draw();

  updateHUD();
  log("Consejo: Construye una Recepci√≥n para empezar.");
})();
</script>
</body>
</html>