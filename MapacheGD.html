<!DOCTYPE html><html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Mapache Google Dorks</title>
<style>
  :root{
    --bg:#0e1117; --panel:#161b22; --panel2:#0b0f14; --txt:#e6edf3; --muted:#9fb0c3; --acc:#4cc9f0; --ok:#22c55e; --warn:#f59e0b; --danger:#ef4444; --br:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
  header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,var(--panel),#12162100);padding:12px 16px 8px;border-bottom:1px solid #1f2630}
  h1{margin:0;font-size:20px;letter-spacing:.3px}
  .wrap{padding:12px 14px 96px;max-width:900px;margin:0 auto}
  .card{background:var(--panel);border:1px solid #1f2630;border-radius:var(--br);padding:12px;box-shadow:0 6px 18px rgba(0,0,0,.22)}
  label{font-size:12px;color:var(--muted);display:block;margin:6px 2px}
  input[type="text"], textarea, select{width:100%;background:#0c121a;border:1px solid #1e2a39;color:var(--txt);border-radius:12px;padding:12px 12px;font-size:16px;outline:none}
  textarea{min-height:96px;resize:vertical}
  .row{display:flex;gap:8px;align-items:center}
  .row > *{flex:1}
  .btn{appearance:none;border:1px solid #1e2a39;background:#0c121a;color:var(--txt);padding:12px 14px;border-radius:12px;font-size:15px;font-weight:600}
  .btn:hover{background:#0f1620}
  .btn.acc{background:var(--acc);color:#07212a;border:none}
  .btn.ok{background:var(--ok);color:#05140a;border:none}
  .btn.warn{background:var(--warn);color:#1f1203;border:none}
  .btn.ghost{background:transparent;border:1px dashed #2a3443;color:var(--muted)}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
  @media (min-width:520px){.grid{grid-template-columns:repeat(3,1fr)}}
  @media (min-width:760px){.grid{grid-template-columns:repeat(4,1fr)}}
  .chips{position:fixed;left:0;right:0;bottom:0;background:linear-gradient(0deg,var(--panel2),#0b0f1400);padding:10px 12px 14px;border-top:1px solid #1f2630;z-index:50}
  .chips h3{margin:0 0 8px 2px;font-size:13px;color:var(--muted)}
  .chipbar{display:flex;gap:8px;overflow:auto;padding-bottom:6px;scroll-snap-type:x mandatory}
  .chip{flex:0 0 auto;scroll-snap-align:start;border:1px solid #2a3443;background:#0c121a;color:var(--txt);padding:10px 12px;border-radius:999px;font-size:14px;white-space:nowrap}
  .chip:active{transform:scale(.98)}
  .out{min-height:56px;white-space:pre-wrap;word-break:break-word;background:#0c121a;border:1px dashed #2a3443;border-radius:12px;padding:10px 12px}
  .badge{display:inline-flex;align-items:center;gap:6px;background:#0c121a;border:1px solid #273241;border-radius:999px;padding:6px 10px;margin:4px 6px 0 0}
  .badge b{font-weight:700}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  .small{font-size:12px;color:var(--muted)}
  .toast{position:fixed;left:50%;bottom:88px;transform:translateX(-50%);background:#0c121a;border:1px solid #2a3443;padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none;transition:opacity .2s}
  .toast.show{opacity:1}
</style>
</head>
<body>
  <header>
    <h1>ü¶ù MAPACHE ‚Ä¢ Google Dorks</h1>
    <div class="small">Constructor m√≥vil para consultas avanzadas</div>
  </header>  <div class="wrap">
    <section class="card" aria-label="Editor de bloque actual">
      <label for="term">T√©rmino base (se usa como valor por defecto para comillas y placeholders)</label>
      <input id="term" type="text" placeholder="ej.: contrase√±a, admin, facturas, \"Juan P√©rez\", ejemplo.com" /><label for="editor" style="margin-top:10px">Bloque en edici√≥n (se ir√°n agregando dorks aqu√≠)</label>
  <textarea id="editor" placeholder="Pulsa chips abajo para insertar plantillas o escribe tu propio dork..."></textarea>

  <div class="row" style="margin-top:8px">
    <div>
      <label for="joiner">Unir con el bloque anterior</label>
      <select id="joiner">
        <option value=" ">Nada (espacio)</option>
        <option value=" AND ">AND</option>
        <option value=" OR ">OR</option>
        <option value=" custom ">Otro‚Ä¶</option>
      </select>
    </div>
    <div style="align-self:flex-end;display:flex;gap:8px">
      <button class="btn ghost" id="clearBlock" title="Vaciar el bloque en edici√≥n">Vaciar</button>
      <button class="btn acc" id="addBlock" title="A√±adir el bloque construido al resultado">A√±adir</button>
    </div>
  </div>
  <div class="small">Consejo: toca un chip para insertar una plantilla; si pide valores y dejas vac√≠o, usar√° el <b>T√©rmino base</b>.</div>
</section>

<section class="card" style="margin-top:12px" aria-label="Resultado">
  <label>Resultado (consulta final)</label>
  <div id="result" class="out" tabindex="0"></div>
  <div id="badges" class="small" style="margin-top:6px"></div>
  <div class="toolbar" style="margin-top:10px">
    <button class="btn ok" id="copyBtn">Copiar</button>
    <button class="btn" id="searchBtn">Buscar en Google</button>
    <button class="btn warn" id="clearAll">Limpiar todo</button>
  </div>
  <div class="small" style="margin-top:6px">Se abrir√° en una nueva pesta√±a usando <code>https://www.google.com/search?q=</code></div>
</section>

  </div>  <!-- Chips / plantillas en la parte inferior -->  <div class="chips" role="toolbar" aria-label="Plantillas r√°pidas">
    <h3>Plantillas r√°pidas</h3>
    <div class="chipbar" id="chipbar"></div>
  </div>  <div class="toast" id="toast">Copiado al portapapeles</div><script>
// --- Utilidades ---
const $ = sel => document.querySelector(sel);
function toast(msg){ const t=$('#toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1400); }
function ask(msg, def=""){ const v = prompt(msg, def ?? ""); return v===null? null : v.trim(); }

// --- Definici√≥n de plantillas ---
// Usamos {t}, {t1}, {t2}, {t3}, {dom}, {neg}
const templates = [
  { label:'""', tpl:'""' },
  { label:'inurl:x -x', tpl:'inurl:{t} -{t}' },
  { label:'intitle:"" OR intitle:""', tpl:'intitle:"{t1}" OR intitle:"{t2}"' },
  { label:'site:dom', tpl:'site:{dom}' },
  { label:'inurl:x', tpl:'inurl:{t}' },
  { label:'intitle:x', tpl:'intitle:{t}' },
  { label:'intext:x', tpl:'intext:{t}' },
  { label:'filetype:pdf ""', tpl:'filetype:pdf "{t}"' },
  { label:'cache:dom', tpl:'cache:{dom}' },
  { label:'related:dom', tpl:'related:{dom}' },
  { label:'allintitle:a b', tpl:'allintitle:{t1} {t2}' },
  { label:'allinurl:a b', tpl:'allinurl:{t1} {t2}' },
  { label:'allintext:a b', tpl:'allintext:{t1} {t2}' },
  { label:'inurl:x.php', tpl:'inurl:{t}.php' },
  { label:'filetype:xls intext:""', tpl:'filetype:xls intext:"{t}"' },
  { label:'intitle:"" ""', tpl:'intitle:"{t1}" "{t2}"' },
  { label:'intext:"" "" ""', tpl:'intext:"{t1}" "{t2}" "{t3}"' },
  { label:'filetype:log intext:"" -x', tpl:'filetype:log intext:"{t}" -{neg}' },
  { label:'intext OR intext + inurl', tpl:'intext:"{t1}" OR intext:"{t2}" inurl:{t}' },
  { label:'2√ó intext -site', tpl:'intext:"{t1}" intext:"{t2}" -site:{dom}' },
  { label:'intext + inurl:"" + ""', tpl:'intext:"{t1}" inurl:"{t2}" "{t3}"' },
  { label:'intitle OR intext + .php?id=', tpl:'intitle:"{t1}" OR intext:"{t2}" inurl:".php?id="' },
  { label:'3√ó intext OR', tpl:'intext:"{t1}" OR intext:"{t2}" intext:"{t3}"' },
  { label:'2√ó intext + inurl', tpl:'intext:"{t1}" intext:"{t2}" inurl:{t}' },
  { label:'pdf + 2√ó intext -site', tpl:'filetype:pdf intext:"{t1}" intext:"{t2}" -site:{dom}' },
  { label:'intext OR intext -site', tpl:'intext:"{t1}" OR intext:"{t2}" -site:{dom}' },
  { label:'intext OR intext + intitle', tpl:'intext:"{t1}" OR intext:"{t2}" intitle:"{t3}"' }
];

// Render chips
const chipbar = $('#chipbar');
for(const t of templates){
  const b = document.createElement('button');
  b.className = 'chip';
  b.type = 'button';
  b.textContent = t.label;
  b.addEventListener('click', ()=>insertTemplate(t.tpl));
  chipbar.appendChild(b);
}

function valueOrTerm(v){
  const base = $('#term').value.trim();
  return v && v.length ? v : (base.length? base : '');
}

function insertTemplate(tpl){
  // Detect placeholders and ask the user only for the ones present
  const placeholders = Array.from(new Set((tpl.match(/\{(t|t1|t2|t3|dom|neg)\}/g) || []).map(x=>x.slice(1,-1))));
  const vals = {};
  for(const ph of placeholders){
    let msg = {
      t:'Valor (t√©rmino)', t1:'Valor 1', t2:'Valor 2', t3:'Valor 3', dom:'Dominio (ej. ejemplo.com)', neg:'Negativo (ej. -admin)'
    }[ph] || ph;
    const ans = ask(msg, $('#term').value.trim());
    if(ans===null) return; // cancelado
    vals[ph] = valueOrTerm(ans);
  }
  let out = tpl.replace(/\{(t|t1|t2|t3|dom|neg)\}/g, (_,k)=> vals[k] ?? '');
  const ed = $('#editor');
  ed.value = (ed.value.trim() ? ed.value.trim()+ ' ' : '') + out;
  ed.focus();
}

// A√±adir bloque al resultado con joiner
const result = $('#result');
const badges = $('#badges');
$('#addBlock').addEventListener('click', ()=>{
  const block = $('#editor').value.trim();
  if(!block){ toast('Bloque vac√≠o'); return; }
  let joiner = $('#joiner').value;
  if(joiner.includes('custom')){
    const custom = ask('Introduce operador intermedio (se insertar√° entre bloques), p. ej.: AND site:ejemplo.com');
    if(custom===null) return; // cancelado
    joiner = ' ' + custom.trim() + ' ';
  }
  const hasExisting = result.textContent.trim().length>0;
  result.textContent = (hasExisting? result.textContent + joiner : '') + block;

  // A√±adimos una badge hist√≥rica
  const badge = document.createElement('span');
  badge.className='badge';
  badge.innerHTML = `<b>+</b> <span>${escapeHtml(block).slice(0,80)}${block.length>80?'‚Ä¶':''}</span>`;
  badges.appendChild(badge);

  // Limpiar editor
  $('#editor').value='';
});

$('#clearBlock').addEventListener('click', ()=>{ $('#editor').value=''; });
$('#clearAll').addEventListener('click', ()=>{ result.textContent=''; badges.innerHTML=''; $('#editor').value=''; });

$('#copyBtn').addEventListener('click', async ()=>{
  const txt = result.textContent.trim();
  if(!txt){ toast('No hay nada que copiar'); return; }
  try{ await navigator.clipboard.writeText(txt); toast('Consulta copiada ‚úî'); }
  catch{ toast('No se pudo copiar'); }
});

$('#searchBtn').addEventListener('click', ()=>{
  const q = result.textContent.trim();
  if(!q){ toast('Crea una consulta primero'); return; }
  const url = 'https://www.google.com/search?q=' + encodeURIComponent(q);
  window.open(url, '_blank');
});

function escapeHtml(s){
  return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
}

// Accesibilidad: Enter a√±ade cuando foco en editor
$('#editor').addEventListener('keydown', (e)=>{
  if((e.ctrlKey||e.metaKey) && e.key==='Enter'){ e.preventDefault(); $('#addBlock').click(); }
});
</script></body>
</html>